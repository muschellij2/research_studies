---
output: html_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  echo = FALSE
)
```

# Research Studies

Here are a table of the flyers for research studies at JHU:

```{r reader, include = FALSE}
library(googlesheets)
library(dplyr)
doc = gs_url("https://docs.google.com/spreadsheets/d/1uFuY9qw92BomzfplDDsh9stnEh1Zc-3AyRvuXZJd0VU/edit#gid=0") 
data = doc %>% 
  gs_read


df = data
df = df %>% 
  mutate(compensation = trimws(compensation),
         compensation = sub("$", "", compensation, fixed = TRUE),
         compensation = sub(",", "", compensation, fixed = TRUE),
         compensation = as.numeric(compensation))
createLink <- function(val) {
  sprintf('<a href="%s" target="_blank" class="btn btn-primary">Link</a>',val)
}
df = df %>% 
  mutate(Flyer = createLink(Flyer)) %>% 
  select(Flyer, Name, compensation,  compensated, sex, phone, phone2, email, email2,  everything()) %>% 
  arrange(desc(compensation)) 

```


```{r dtable}

library(DT)
DT::datatable(df, escape = FALSE, width = "100%",  options = list(
  autoWidth = TRUE,
  paging = FALSE,
  pageLength = 30))
```

# Tables from the Hub

See https://hub.jhu.edu/announcements/students/research-participants-wanted/ for additional information about studies.  Here is the table we have compiled from that data:

```{r dtable_jhu}
page_df = readr::read_rds("page_links_with_info.rds")
page_df = page_df %>% 
  select(-page) %>% 
  mutate(link = createLink(link)) %>% 
  select(link, title, summary, everything())
DT::datatable(page_df, escape = FALSE, width = "100%",  options = list(
  autoWidth = TRUE,
  paging = TRUE,
  pageLength = 30))
```
